            <!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Переводчик с двумя этапами</title>
<style>
  body { font-family: Arial; background: #f0f0f0; padding: 20px; }
  .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 8px; }
  textarea { width: 100%; height: 150px; margin-bottom: 10px; }
  button { width: 100%; padding: 10px; font-size: 16px; }
  .output { border: 1px solid #ccc; background: #fafafa; padding: 10px; min-height: 150px; white-space: pre-wrap; }
</style>
</head>
<body>
<div class="container">
  <h1>Переводчик новеллы "Перепутье"</h1>

  <h2>Шаг 1: Введите текст на русском и нажмите "Перевести"</h2>
  <textarea id="inputText" placeholder="Введите текст на русском"></textarea>
  <button id="translateBtn">Перевести</button>

  <h2>Шаг 2: Отформатировать переведённый текст</h2>
  <button id="formatBtn" disabled>Форматировать</button>
  <div id="output" class="output"></div>
</div>

<script>
  const inputText = document.getElementById('inputText');
  const translateBtn = document.getElementById('translateBtn');
  const formatBtn = document.getElementById('formatBtn');
  const output = document.getElementById('output');

  let translatedText = '';

  translateBtn.addEventListener('click', () => {
    const text = inputText.value.trim();
    if (!text) {
      alert('Введите текст для перевода');
      return;
    }
    translateBtn.disabled = true;
    translateBtn.textContent = 'Перевод...';

    // Здесь вызов реального API перевода через сервер или заглушка
    fakeTranslate(text).then(result => {
      translatedText = result;
      output.textContent = translatedText;
      formatBtn.disabled = false;
    }).catch(err => {
      alert('Ошибка перевода: ' + err);
    }).finally(() => {
      translateBtn.disabled = false;
      translateBtn.textContent = 'Перевести';
    });
  });

  formatBtn.addEventListener('click', () => {
    if (!translatedText) return;
    const formatted = formatNovelText(translatedText);
    output.innerHTML = formatted;
  });

  // Заглушка перевода — просто заменяет русские слова на английские (пример)
  function fakeTranslate(text) {
    return new Promise((resolve) => {
      // Пример простой замены для демонстрации
      const dictionary = {
        'Привет': 'Hello',
        'мир': 'world',
        'Как дела': 'How are you',
        'Перепутье': 'Crossroads',
      };
      let result = text;
      for (const [ru, en] of Object.entries(dictionary)) {
        const re = new RegExp(ru, 'g');
        result = result.replace(re, en);
      }
      // Имитируем задержку
      setTimeout(() => resolve(result), 500);
    });
  }

  function formatNovelText(text) {
    // Жирным выделяем имена перед двоеточием
    text = text.replace(/(\b[А-ЯЁ][а-яё]+(?:\s[А-ЯЁ][а-яё]+)*):/g, '<strong>\$1:</strong>');
    text = text.replace(/\n/g, '<br>');
    return text;
  }
</script>
</body>
</html>
